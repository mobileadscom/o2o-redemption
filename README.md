# O2O Coupon Redemption Plugin

#### HTML structure should be as shown in views\pages\index.ejs

which consist of 4 pages
- Main Coupon Page, which has the redeem button. The event of the button can be set to clicking or swiping. Triggering the button show the Confirmation Page.
- Confirmation Page, consist of pin input and store selection (both are optional), and a 'confirm' button to redeem the coupon
- Thank You Page, which is shown when coupon successfully redeemed.
- Already Redeemed Page, which is shown when the coupon is already redeemed before.


#### Coupon redemption settings
```
coupon.init({
    campaign: {
        campaignId: 'b46fd1e21b2d7ff50bac2ce6fd5dfdc3',
        studioId: '51',
        userId: '3774',
        code: params.phoneNo // query parameter in the url for the coupon code
    },
    multipleRedemption: false,
    pages: {
        main: 'mainPage', // main page that has the coupon and a button that brings to confirm redeem page
        confirm: 'confirmPage', // Redeem Confirmation page which has redeem button and cancel button
        thankyou: 'thankyouPage', // Thank You page after redemption is successful
        redeemed: 'redeemedPage' // 'Already redeemed page if the coupon is already readeemed'
    },
    buttons: {
        main: { // main button that bring to confirm redeem page
            class: 'mainBtn',
            event: 'click', // event: 'click' || 'swipe'
        },
        redeem: { // redeem button on the confirmation page, clicking it will redeem the coupon
            id: 'confirmBtn'
        },
        back: { // back buttons, clicking it will bring back to the main page
            class: 'cancelBtn'
        },
    },
    pin: { // {{optional}} for pin confirmation on redeem, please remove this if not using
    	id: 'pinInput', // id of the <input> for code entering
    	code: '0123' // confirmation pin code
    },
    storeSelect: { // {{optional}} for multi store, please remove this if it's single store
    	id: 'storeInput', // id of the <select> for stores
        stores: ['store1','store2'] // stores to select
    },
    extRedeemTracker: ['http://externaltracker'], // {{optional}} for external tracker of redemption
    trackingParam: { // used in the tracking url of redemption
    	dsp: 'test',
    	exchange: 'NA',
    	inventory: 'www.test.com'
    },
    isPreview: true // preview mode or real serving mode. On preview mode, there's no actual validation nor tracking.
});
```

### Quickstart
```
npm install
npm run dev
```

### Production
Built files output is at public\dist which are generated by running 

`npm run build:prod`
